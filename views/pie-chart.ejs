<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
	<title>Pie Chart</title>
  <link href="./lib/nv.d3.css" rel="stylesheet" type="text/css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.2/d3.min.js" charset="utf-8"></script>
  <script src="./lib/nv.d3.js"></script>
  <script src="./lib/stream_layers.js"></script>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>
<body>
  <script>
  var piedata = <%- JSON.stringify(datajson) %>
  var width = 600;
  var height = 600;

  nv.addGraph(function() {
    var chart = nv.models.pie()
    .x(function(d) { return d.label })
    .y(function(d) { return d.value })
    .showLabels(true)     //Display pie labels
    .labelThreshold(.005)  //Configure the minimum slice size for labels to show up
    .labelType("key") //Configure what type of data to show in the label. Can be "key", "value" or "percent"
    .donut(true)          //Turn on Donut mode. Makes pie chart look tasty!
    .donutRatio(0.35)     //Configure how big you want the donut hole size to be.
    .width(width)
    .height(height)
    .labelsOutside(true) // put lables outside the pie charset
    ;
    d3.select("#chart")
      .datum([piedata])
      .attr('width', width)
      .attr('height', height)
      .transition().duration(350)
      .call(chart);
  })
</script>
<div> <svg id="chart"></svg></div>
</body>
</html>
